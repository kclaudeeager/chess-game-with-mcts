<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCTS Chess Engine</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="connection-status" id="connectionStatus">Connecting...</div>
    
    <div class="game-container">
        <div class="info-panel mcts-info">
            <h3>üß† MCTS Chess Engine</h3>
            <details>
                <summary style="font-size: 1em; cursor: pointer; color: #FFD700; outline: none; margin-bottom: 10px;">Engine & Algorithm Details</summary>
                <div>
                    <p><strong>Algorithm:</strong> Monte Carlo Tree Search</p>
                    <p><strong>Simulations:</strong> ~500 per move</p>
                    <p><strong>Time Limit:</strong> 3 seconds</p>
                    <p><strong>Search Depth:</strong> Variable</p>
                    <h4 style="margin-top: 20px; color: #FFD700;">How MCTS Works:</h4>
                    <p>1. <strong>Selection:</strong> Navigate tree using UCB1</p>
                    <p>2. <strong>Expansion:</strong> Add new nodes</p>
                    <p>3. <strong>Simulation:</strong> Random playouts</p>
                    <p>4. <strong>Backpropagation:</strong> Update statistics</p>
                    <p style="margin-top: 15px; font-size: 14px; opacity: 0.9;">
                        The AI builds a search tree by exploring promising moves and uses random simulations to evaluate positions. Unlike traditional engines, it doesn't rely on deep tactical analysis but rather statistical sampling.
                    </p>
                </div>
            </details>
        </div>
        
        <div class="chess-board-container">
            <div class="game-header">
                <h1 class="game-title">‚ôî MCTS Chess Engine ‚ôõ</h1>
                <p class="game-subtitle">Advanced Monte Carlo Tree Search Chess AI</p>
            </div>
            
            <div class="status" id="status">Loading game...</div>
            
            <div class="chess-board" id="chessBoard">
                <!-- Board will be generated by JavaScript -->
            </div>
            
            <div class="controls">
                <button onclick="resetGame()" id="resetBtn">üîÑ New Game</button>
                <button onclick="getAIMove()" id="aiMoveBtn" disabled>ü§ñ AI Move</button>
                <select id="gameModeSelect" onchange="changeGameMode()">
                    <option value="human_vs_ai">Human vs AI</option>
                    <option value="human_vs_human">Human vs Human</option>
                </select>
            </div>
            
            <!-- AI Settings Panel -->
            <div id="aiSettings" style="margin-top: 15px; padding: 15px; background-color: #2a2a2a; border-radius: 8px;">
                <h4 style="margin-bottom: 10px; color: #FFD700;">‚öôÔ∏è AI Settings</h4>
                <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                        <input type="checkbox" id="useRLEngine" onchange="toggleRLEngine()" style="margin: 0;">
                        <span style="font-size: 14px;">üß† Enable RL Enhancement</span>
                    </label>
                    <div style="font-size: 12px; opacity: 0.8; max-width: 300px;">
                        When enabled, the AI uses reinforcement learning to improve its play based on recorded games.
                    </div>
                </div>
                <div id="rlStatus" style="margin-top: 8px; font-size: 12px; opacity: 0.7;"></div>
            </div>
        </div>
        
        <div class="info-panel game-info sticky-status">
            <div id="gameStatus">
                <p><strong>Current Player:</strong> <span id="currentPlayer">White</span></p>
                <p><strong>Check Status:</strong> <span id="checkStatus">None</span></p>
                <p><strong>Game State:</strong> <span id="gameState">In Progress</span></p>
            </div>
            <h4 style="margin-top: 20px; color: #FFD700;">Material Balance</h4>
            <div id="materialBalance">
                <div class="material-container">
                    <div class="material-section">
                        <strong>White:</strong> <span id="whiteMaterial">39</span> points
                        <div id="whitePieces" class="piece-count"></div>
                    </div>
                    <div class="material-section">
                        <strong>Black:</strong> <span id="blackMaterial">39</span> points
                        <div id="blackPieces" class="piece-count"></div>
                    </div>
                </div>
                <div class="material-balance">
                    <strong>Balance:</strong> <span id="materialDifference">Even</span>
                </div>
            </div>
            <div style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
                <p><strong>Instructions:</strong></p>
                <p>‚Ä¢ Click a piece to select it</p>
                <p>‚Ä¢ Click a highlighted square to move</p>
                <p id="gameModeInstructions">‚Ä¢ You play as White, AI as Black</p>
                <p><strong>Mode:</strong> <span id="currentGameMode">Human vs AI</span></p>
            </div>
            <h4 style="margin-top: 20px; color: #FFD700;">Move History</h4>
            <div class="move-history" id="moveHistory">
                <p>Game started. White to move.</p>
            </div>
        </div>
    </div>
    <script src="/static/js/main.js"></script>
</body>
</html>